{% extends "layout.html" %}

{% block title %}
    Student Profile
{% endblock %}

{% block main %}
<section class="bg-white dark:bg-gray-900">
    <div class="grid max-w-screen-xl px-4 py-8 mx-auto lg:gap-8 xl:gap-0 lg:py-16 lg:grid-cols-12">
        <div class="mr-auto place-self-center lg:col-span-7">
            <h1 class="max-w-2xl mb-4 text-3xlxl font-extrabold leading-none tracking-tight md:text-5xl xl:text-6xl dark:text-white">Student Profile</h1>
            <form method="POST" enctype="multipart/form-data" class="space-y-6">
                <div class="card">
                    <div class="flex items-center space-x-4">
                        <img class="w-20 h-20 rounded-full" src="{{ url_for('static', filename='img/studentImg/' + student.profile.image_file) }}" alt="Student's profile picture">
                        <div>
                            <h2 class="text-lg font-semibold text-gray-900">{{ student.username }}</h2>
                        </div>
                    </div>
                    <div class="mt-3 space-y-2">
                        <div class="form-group">
                            <h3 class="font-semibold text-gray-600">Hometown:</h3>
                            <div id="hometown-text" class="form-text">{{ student.profile.hometown }}</div>
                                <input type="text" id="hometown-input" name="hometown" value="{{ student.profile.hometown }}" class="form-input hidden w-full custom-input">
                            </div>

                    <!-- Goal field -->
                    <div class="form-group">
                        <h3 class="font-semibold text-gray-600">Goal:</h3>
                        <div id="goal-text" class="form-text">{{ student.profile.goal }}</div>
                        <input type="text" id="goal-input" name="goal" value="{{ student.profile.goal }}" class="form-input hidden w-full custom-input">
                    </div>

                    <!-- Hobbies field -->
                    <div class="form-group">
                        <h3 class="font-semibold text-gray-600">Hobbies:</h3>
                        <div id="hobbies-text" class="form-text">{{ student.profile.hobbies }}</div>
                        <input type="text" id="hobbies-input" name="hobbies" value="{{ student.profile.hobbies }}" class="form-input hidden w-full custom-input">
                    </div>

                    <!-- Correction Style field -->
                    <div class="form-group">
                        <h3 class="font-semibold text-gray-600">Correction Style:</h3>
                        <div id="correction_style-text" class="form-text">{{ student.profile.correction_style }}</div>
                        <input type="text" id="correction_style-input" name="correction_style" value="{{ student.profile.correction_style }}" class="form-input hidden w-full custom-input">
                    </div>

                    <!-- English Weakness field -->
                    <div class="form-group">
                        <h3 class="font-semibold text-gray-600">English Weakness:</h3>
                        <div id="english_weakness-text" class="form-text">{{ student.profile.english_weakness }}</div>
                        <input type="text" id="english_weakness-input" name="english_weakness" value="{{ student.profile.english_weakness }}" class="form-input hidden w-full custom-input">
                    </div>
                        <!-- End of repeated structure -->
                    </div>
                    <div class="form-group text-center">
                        <a href="#" id="edit" class="text-blue-500" onclick="editAllFields()">Edit</a>
                        <!-- Cancel button -->
                        <button type="button" id="cancel" class="btn btn-outline bg-red-500 text-white mt-4 hidden" onclick="cancelEditAllFields()">Cancel</button>
                        <input type="submit" value="Update Profile" class="btn btn-primary py-2 px-4 bg-blue-500 text-white" id="update-profile-button" style="display: none;">
                    </div>
                </div>
            </form>
        </div>
    </div>
</section>
<script>
    function editAllFields() {
        var fields = ['hometown', 'goal', 'hobbies', 'correction_style', 'english_weakness'];
        for (var i = 0; i < fields.length; i++) {
            var fieldName = fields[i];
            document.getElementById(fieldName + '-text').classList.add('hidden');
            document.getElementById(fieldName + '-input').classList.remove('hidden');
        }
        document.getElementById('edit').classList.add('hidden');
        document.getElementById('cancel').classList.remove('hidden');
        document.getElementById('update-profile-button').style.display = 'inline-block';
    }

    function cancelEditAllFields() {
        var fields = ['hometown', 'goal', 'hobbies', 'correction_style', 'english_weakness'];
        for (var i = 0; i < fields.length; i++) {
            var fieldName = fields[i];
            document.getElementById(fieldName + '-text').classList.remove('hidden');
            document.getElementById(fieldName + '-input').classList.add('hidden');
        }
        document.getElementById('edit').classList.remove('hidden');
        document.getElementById('cancel').classList.add('hidden');
        document.getElementById('update-profile-button').style.display = 'none';
    }
</script>
{% endblock %}